<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>填写信息</title>
		<link rel="stylesheet" type="text/css" href="../../css/reset.css"/>
		<link rel="stylesheet" type="text/css" href="../../css/style.css"/>
		<link rel="stylesheet" type="text/css" href="../../css/css.css"/>
		<script src="../../js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/fontSize.js" type="text/javascript" charset="utf-8"></script>
		<link rel="stylesheet" href="../../single_css/global.css">
		<style>
			.bm_bg{
				background-color:#EFEFF4;	
				font-family: PingFangSC-Regular, sans-serif;
				/*overflow: scroll;*/		
			}
			.bm_border{
				border-bottom:2px solid #F6F6F6;
			}
			.c_top{
				padding-top:.32rem;
				position: relative;
			}
			.tx_input{
				/*border-bottom:2px solid rgba(158,158,158,.2)!important;*/
				border-bottom: 2px solid rgba(0,0,0,0.1) !important;
			}
			
			input{
				text-align: start!important;
				padding:.4rem;
				color:#595959!important;
			}
			.footer{
				width: 7.5rem;
				left: 50%;
				margin-left: -3.75rem;
				z-index:1000;
			}
			.alert_show{
			    width: 5.60rem;
			    height: 3.14rem;
			    background: #F6F6F6;
			    border-radius: .2rem;
			    box-shadow:0 0.15rem 0.8rem #ccc;
			    z-index: 1000;
			    position: fixed;
			    top: 50%;
			    left: 50%;
			    margin-left:-2.8rem;
			    margin-top:-1.6rem;
			}
			.alert_show div.first{
				width:2.82rem;
				height:.9rem;
				text-align: center;
				margin:0 auto;
			}
			.alert_show div.first span{
				font-weight: bold;
			}
			.alert_show p{
				font-size:.32rem;
				font-family: PingFangSC-Medium, sans-serif;
				line-height:.45rem;
			}
			.alert_show div.second{
				width:5.6rem;
				height:.98rem;				
				font-size:.32rem;
				font-family: PingFangSC-Medium, sans-serif;
				line-height:.95rem;
				text-align: center;
				font-weight: bold;
			}
			.alert_show .first_b{
				height:2.16rem;
				padding-top:.64rem;
				box-shadow:0 2px 6px -2px #999;					
			}
			.radio_txt{		
				position:relative;
				font-size:.32rem;
				/*margin-top:.32rem;*/
				margin-left:.7rem;
			}
			
			.radio_txt a{
				color:#4ca3f8;
				font-size:.32rem;
				font-family: PingFangSC-Regular, sans-serif;
				line-height:.45rem;
				margin-top:.32rem;
			}
			.radio_txt span{
				color:#595959;
				font-size:.32rem;
				height: 0.45rem;
				font-family: PingFangSC-Regular, sans-serif;
				line-height:.45rem;
				margin-top:.32rem;
			}
			.radio_txt .c{
				margin-top:0rem;
				width:.4rem;
				height:.4rem;
				margin-right:.16rem;
				display: block;
				float: left;	
				background-size: cover;
			}
			.nr span{
				color:#595959;
			}
			
			ul.c li div{
				position: relative;
			}
			ul.c li div span{
				position: absolute;
				background-size: 0.24rem 0.24rem !important;
				background-position: 2rem center !important;
				background-repeat: no-repeat !important;
				width: 2.4rem !important;
			}
			
			ul.c li div input{
				position: absolute;
				left: 2.4rem;
				width: 3.84rem !important;
				
			}
			.border_green{
				background-image: url(../../images/notice_green.png) !important;
			}
			.border_red{
				background-image: url(../../images/notice_red.png) !important;
			}
			ul.c_list{
				z-index: 100;
			}
			ul.c_list li input{
				box-shadow: none !important;
				background: transparent !important;
				box-shadow: none !important;
				z-index: 100000;
			}
			ul.c_list li:nth-child(1){
				border-top-left-radius: 0.1rem !important;
			}
			ul.c_list li:nth-child(3){
				border-bottom-left-radius: 0.1rem !important;
			}
			.transparent{
				width: 3.84rem;
				height: 2.68rem;
				box-shadow: 0px 0px 0.1rem rgba(174,174,174,.5) inset;
				position: absolute;
				top: 1.5rem;
				left: 3.03rem;
				z-index: 10;
				background-color: #f6f6f6;
				border-top-right-radius: 0.1rem;
				border-bottom-right-radius: 0.1rem;
			}
			.zl .c_list li div{
				border-radius: 0 !important;
			}
		</style>
	</head>
	<body>
		<div class="outerScroller">
			<form action="__CONTROLLER__/addteam/aid/<{$aid}>" method="post" id="subform" name="subform" enctype="multipart/form-data" >
			<div class="scroll">
				<header>
					<div class="d-title">
						<a href="#">
							<img src="../../images/cd.png" alt="" />
						</a>
						<span>团队组建</span>
					</div>
				</header>
		
				<section class="width-box bg bm_bg">							
					<div class="zl widthbox c_top">
						<ul class="c">
						 	<li>
								<div>
									<span id="teamN" style="color:#595959">团队名称</span>
									<input type="text" class="teamname" name="team_name" id="teamname" value=""  onblur="checkName()"/>
								</div>
							</li>
						 </ul>
						 <ul class="c c_list">
						 	<li>
								<div>
									<span class="tx_input" id="userN">领队名称</span>
									<input type="text" name="user_name" id="username" value="" class="tx_input"  onblur="checkuser()"/>
								</div>
							</li>
							<li>
								<div>
									<span class="tx_input" id="userT">手机号码</span>
									<input type="text" name="mobile" id="usertel"  value="" class="tx_input"  onblur="checktel()" />
								</div>
							</li>
							<li>
								<div>
									<span class="usercard" id="userC">身份证号</span>
									<input type="text" name="id_number" id="usercard" value=""  onblur="checknum()"/>
								</div>
							</li>
						 </ul>
						 <div class="transparent"></div>
					</div>
					
					<div class="d-information widthbox">
						<div class="tx">
							<input type="hidden" name="id" value=""  />
						</div>
					</div>
					
					<div class="radio_txt agree"><span class="c" style="background-image: url(../../images/oval2.png)"></span>
						<span style="position:relative;">我已阅读<a href="javascript:;">《免责说明》</a></span>
					</div>	
				</section>
					
				<div class="z-alert">
					<ul>
						<li>
							<a href="#" class="active">徒步活动</a>
						</li>
						<li>
							<a href="#">最美徒步</a>
						</li>
						<li>
							<a href="#">健康指导</a>
						</li>
					</ul>
				</div>
				
					<footer class="footer">
						<ul class="bottom">
							<li>
								<a href="javascript:;">取消</a>
							</li>
							<li>
								<a id="submit" name="submit" type="button">下一步</a>
							</li>
						</ul>
					</footer> 
				</div>
			</form>
			</div>
			
			<div class="alert_show alert_show1" style="display:none">
				<div class="first_b">
					<div class="first alert_txt_vail">
						<p><span>手机号码</span>不对，</p >
						<p>请重新填写。</p >
					</div>
				</div>
				<div class="second">确认</div>
			</div>
			
			<div class="alert_show alert_show2" style="display:none">
				<div class="first_b alert_txt">									
					<p style="text-align: center;">请填写团队名称！</p >			
				</div>
				<div class="second">确认</div>
			</div>
			
		</div>
	</div>
	<div class="box-transparent"></div>	
	
	</div>
	</div>
	<script type="text/javascript">
		$('.z-alert').height($(window).height()-$('header').height())	
//表单验证
$('.bm_bg').height($(window).height()-$('footer').height());
function vail1(s1){
	return s1.replace(/^1[34578]\d{9}$/g, "");
}
function vail2(s2){
	return s2.replace(/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/, "");
}					
							       

$(function(){
	$('.radio_txt .c').toggle(function(){
		$('.radio_txt .c').css('background-image','url(../../images/oval1.png)');// 未选中
		$('.radio_txt').removeClass('agree');
		
	},function(){					
		$('.radio_txt .c').css('background-image','url(../../images/oval2.png)');// 选中
		$('.radio_txt').addClass('agree');
	})
	
	
	$('#submit').click(function(e){	
		var teamname=$('#teamname');
		if(teamname.val()==""){
			$('.alert_txt p').html('请填写团队名称!');
			$('.alert_show2').show();						
			$('.second').click(function(){							
				$('.alert_show2').hide();
			});	
			return false;
		}

		var userName=$('#username');
		if(userName.val()==""){
			$('.alert_txt p').html('请填写领队名称!');
			$('.alert_show2').show();						
			$('.second').click(function(){							
				$('.alert_show2').hide();
			});						
			return;
		}

		var usertel=$('#usertel');
		var reg=/^1[3|4|5|7|8]\d{9}$/;
		if(!reg.test(usertel.val())){
	 		$('.alert_show1').show();						
			$('.second').click(function(){							
				$('.alert_show1').hide();
			});	
			return;
		}else{
			document.getElementById('userT').style.color='#595959';	
		}

		var usercard=$('#usercard');
		var reg=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/;
		if(!reg.test(usercard.val())){
			$('.alert_txt_vail span').html('身份证');
			$('.alert_show1').show();								
			$('.second').click(function(){
				$('.alert_show1').hide();
			});	
			return;
		}else{
		document.getElementById('userC').style.color='#595959';	
			$('#userC').addClass('border_green');
		}

		if(!($('.radio_txt').hasClass('agree'))){
			$('.alert_txt p').html("请阅读并同意《负责说明》！");
			$('.alert_show2').show();									
				$('.second').click(function(){							
				$('.alert_show2').hide();
			});
			return;
			e.preventDefault();
		}else{
			document.getElementById('subform').submit();return false
		}
		var teamName = $('#teamname').val();
		var userTel = $('#usertel').val();
		var userCard =$('#usercard').val();
		
		
		if($('#teamname').val()||$('#username').val()==""||$('#usertel').val()==""||$('#usercard').val()==""||(!($('.radio_txt').hasClass('agree')))){
			$('#submit').attr('disabled','disabled');
		}
	});	
})

		
	
	
//判断团队名字
var checkuser=function(){
	if($('#username').val()==""){
		$('#username').siblings().addClass('border_red');
	}else{
		$('#username').siblings().addClass('border_green').removeClass('border_red');
	}
};
//  手机号 
var checktel=function(){
	var reg=/^1[34578]\d{9}$/g;
	var usertel=document.getElementById('usertel');
	if(!reg.test(usertel.value)){
		$('#usertel').siblings().addClass('border_red');
		$('.alert_txt_vail span').html('手机号码');
		$('.alert_show1').show();								
		$('.second').click(function(){
			$('.alert_show1').hide();
		});	
	}else{
		$('#usertel').siblings().addClass('border_green').removeClass('border_red');
	}
};
var checknum=function(){
	var reg=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/;
	var usercard=document.getElementById('usercard');
	if(!reg.test(usercard.value)){
		$('#usercard').siblings().addClass('border_red');
		$('.alert_txt_vail span').html('身份证');
			$('.alert_show1').show();								
			$('.second').click(function(){
				$('.alert_show1').hide();
			});
	}else{
		$('#usercard').siblings().addClass('border_green').removeClass('border_red');
		}
	};



var teamnamerepeat=$('.teamname');
/*teamnamerepeat.blur(function(){
	var team_name=$('input[name="team_name"]').val();
	$.ajax({
		url:"__CONTROLLER__/teamnamerepeat",//这里指向的就不再是页面了，而是一个方法。
		data:{team_name:team_name},
		type:"POST",
		dataType:"JSON",
		success: function(data){
			//alert(data.status);//这里要用索引，使用eq读取不出来数据。
			//console.log(data.status);
			if (data.status == 0) {  
				var aa = document.getElementById('teamname');  
				$('#teamname').addClass('border_green');
				
			}else{
				var aa = document.getElementById('teamname');  
				$('#teamname').addClass('border_red');
			}
			
		}
	})*/
var checkName=function(){
	var team_name=$('input[name="team_name"]').val();
	$.ajax({
		url:"__CONTROLLER__/teamnamerepeat",//这里指向的就不再是页面了，而是一个方法。
		data:{team_name:team_name},
		type:"POST",
		dataType:"JSON",
		success: function(data){
			//alert(data.status);//这里要用索引，使用eq读取不出来数据。
			//console.log(data.status);
			if (data.status == 0) {  
				$('#teamname').siblings().addClass('border_green').removeClass('border_red');
				
			}else if(data.status == 1){
				$('#teamname').siblings().addClass('border_red');
				
			}
		}
	})
};
	</script>
	</body>	
</html>
