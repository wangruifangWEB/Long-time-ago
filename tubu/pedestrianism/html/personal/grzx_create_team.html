<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>我的徒步</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
		<META HTTP-EQUIV="Cache-Control" CONTENT="no-cache">
		<META HTTP-EQUIV="Expires" CONTENT="0">
		<link rel="stylesheet" type="text/css" href="../../css/reset.css" />
		<link rel="stylesheet" type="text/css" href="../../css/style.css" />
		<link rel="stylesheet" href="../../css/css.css" />
		<link rel="stylesheet" href="../../css/mui.picker.all.css" />
		<script src="../../js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/swiper.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/fontSize.js" type="text/javascript" charset="utf-8"></script>
		<link rel="stylesheet" href="../../single_css/global.css">
		<style>
			body {
				background-color: #ececec;
				overflow: scroll;
				font-family: PingFangSC-Regular;
			}
			
			.swiper-container,
			.w {
				height: 100vh;
			}
			
			.outerScroller {
				width: 7.5rem;
				margin: 0 auto;
			}
			
			.scroll {
				position: relative;
				overflow: hidden;
			}
			
			header{
				position: fixed;
			}
			header img{
				width: 0.2rem;
				height: 0.35rem;
				position: absolute;
				top: 0.32rem;
				left: 0.6rem;
				z-index: 100;
			}
			header span{
				width: 100%;
				height: 0.98rem;
				font-size: 0.37rem;
				color: #3c3c40;
				line-height: 0.98rem;
				display: block;
				text-align: center;
			}
			.init-loading img {
				width: 1.2rem;
				height: 1.2rem;
				display: block;
				margin: 0.05rem auto;
			}
			
			.loadtip p {
				font-size: 0.26rem;
				height: 0.4rem;
				line-height: 0.4rem;
				position: fixed;
				bottom: 0;
				width: 7.5rem;
				text-align: center;
				background-color: #ececec;
				z-index: 10;
				font-size: 0.26rem;
			}
			
			.team_list {
				margin-top: 0.98rem;
				width: 7.5rem;
			}
			
			.team_list_ul li {
				height: auto;
				background-color: #ffffff;
				margin-bottom: 0.16rem;
			}
			.team_top {
				height: 2rem;
				width: 7.5rem;
			}
			
			.team_left {
				float: left;
				width: 2.54rem;
				height: 2rem;
			}
			
			.team_left img {
				width: 1.26rem;
				height: 1.36rem;
				margin-top: .3rem;
				margin-left: .8rem;
				display: block;
			}
			
			.team_right {
				float: left;
			}
			
			.team_right p:nth-child(1) {
				font-size: .32rem;
				color: #4d4d4d;
				margin-top: .3rem;
				line-height: .31rem;
				height: .31rem;
			}
			
			.team_right p:nth-child(2),
			.team_right p:nth-child(3) {
				font-size: .28rem;
				color: #4d4d4d;
				height: .26rem;
				line-height: .26rem;
				margin-top: .26rem;
			}
			
			.team_right p:nth-child(2) span,
			.team_right p:nth-child(3) span {
				margin-left: .1rem;
			}
			
			.team_middle {
				width: 7.5rem;
				height: .36rem;
				background-color: #f9af44;
			}
			
			.team_middle p {
				color: #ffffff;
				font-size: .24rem;
				height: .36rem;
				line-height: .36rem;
				text-align: center;
			}
			
			.team_middle img {
				width: .15rem;
				height: .08rem;
				display: inline-block;
				margin-left: .16rem;
				vertical-align: middle;
			}
			
			.team_bottom {
				display: none;
				width: 7.5rem;
				height: auto;
				background-color: #ffffff;
			}
			
			.team_bottom .team_detail {
				width: 7.5rem;
				padding-left: .13rem;
				padding-right: .13rem;
				height: .63rem;
				display: flex;
				justify-content: space-around;
				color: #686868;
				border-bottom: solid 1px #dedede;
			}
			
			.team_bottom .team_detail:nth-last-child(1) {
				border-bottom: none;
			}
			
			.team_bottom .team_detail p {
				height: .22rem;
				line-height: .22rem;
				margin-top: .21rem;
				margin-bottom: .2rem;
				font-size: .22rem;
			}
		</style>
	</head>

	<body>
		<div class="outerScroller">
			<div class="scroll">
				<header>
					<img class="back" src="../../images/back.png" alt="" />
					<span>我创建的团队</span>
				</header>
				<div class="team_list">
					<div class="swiper-container">
						<div class="swiper-wrapper w">
							<div class="swiper-slide d">
								<div class="init-loading list-group-item text-center" style="display: none;"><img src="../../images/loading.gif" /></div>
								<div class="swiper-container2">
									<div class="swiper-slide list-group">
										<ul class="team_list_ul">
											<li>
												<a href="javascript:;">
													<div class="team_top">
														<div class="team_left">
															<img src="../../images/head_list.jpg" alt="">
														</div>
														<div class="team_right">
															<p>中国图书馆</p>
															<p>活动地点：<span>石景山</span></p>
															<p>活动时间：<span>2018-5-12</span></p>
														</div>
													</div>
													<div class="team_middle slide">
														<p><span>名单查询</span><img src="../../images/tobottom.png" alt=""></p>
													</div>
													<div class="team_bottom">
														<div class="team_detail">
															<p>性名：<span>小安</span></p>
															<p>身份证号：<span>130926199501125596</span></p>
															<p>是否乘坐摆渡车：<span>是</span></p>
														</div>
														<div class="team_detail">
															<p>性名：<span>小安</span></p>
															<p>身份证号：<span>130926199501125596</span></p>
															<p>是否乘坐摆渡车：<span>是</span></p>
														</div>
													</div>
												</a>
											</li>

											<li>
												<a href="javascript:;">
													<div class="team_top">
														<div class="team_left">
															<img src="../../images/head_list.jpg" alt="">
														</div>
														<div class="team_right">
															<p>中国图书馆</p>
															<p>活动地点：<span>石景山</span></p>
															<p>活动时间：<span>2018-5-12</span></p>
														</div>
													</div>
													<div class="team_middle">
														<p><span>名单查询</span><img src="../../images/tobottom.png" alt=""></p>
													</div>
													<div class="team_bottom">
														<div class="team_detail">
															<p>性名：<span>小安</span></p>
															<p>身份证号：<span>130926199501125596</span></p>
															<p>是否乘坐摆渡车：<span>是</span></p>
														</div>
														<div class="team_detail">
															<p>性名：<span>小安</span></p>
															<p>身份证号：<span>130926199501125596</span></p>
															<p>是否乘坐摆渡车：<span>是</span></p>
														</div>
													</div>
												</a>
											</li>
										</ul>
									</div>
								</div>
							</div>
						</div>
						<div class="loadtip">
							<p></p>
						</div>
						<div class="swiper-scrollbar"></div>
					</div>
				</div>
			</div>
		</div>
		<script>
			
			$('.back').click(function(){
				history.go(-1);
			})
			
			$('.active_list').height($(window).height() - $('header').height());
			$('.swiper-container,.w').height($(window).height() - $('header').height());
			var loadFlag = true;
			var oi = 0;
			var mySwiper = new Swiper('.swiper-container', {
				direction: 'vertical',
				scrollbar: '.swiper-scrollbar',
				slidesPerView: 'auto',
				mousewheelControl: true,
				freeMode: true,
				onTouchMove: function(swiper) { //手动滑动中触发
					var _viewHeight = document.getElementsByClassName('swiper-wrapper')[0].offsetHeight;
					var _contentHeight = document.getElementsByClassName('swiper-slide')[0].offsetHeight;
				},
				onTouchEnd: function(swiper) {
					var _viewHeight = document.getElementsByClassName('swiper-wrapper')[0].offsetHeight;
					var _contentHeight = document.getElementsByClassName('swiper-slide')[0].offsetHeight;

					// 上拉加载
					if(mySwiper.translate <= _viewHeight - _contentHeight - 50 && mySwiper.translate < 0) {
						$.ajax({
							url: "http://www.baidu.com",
							type: "post",
							success: function(data) {

							},
							error: function() {
								$(".loadtip p").show();
								if(loadFlag) {
									$(".loadtip p").html('正在加载...');
								} else {
									$(".loadtip p").html('没有更多啦！');
								}

								setTimeout(function() {
									for(var i = 0; i < 3; i++) {
										$(".team_list .team_list_ul").eq(mySwiper2.activeIndex).append(
											`
											<li>
												<a href="javascript:;">
													<div class="team_top">
														<div class="team_left">
															<img src="../../images/head_list.jpg" alt="">
														</div>
														<div class="team_right">
															<p>中国图书馆</p>
															<p>活动地点：<span>石景山</span></p>
															<p>活动时间：<span>2018-5-12</span></p>
														</div>
													</div>
													<div class="team_middle">
														<p><span>名单查询</span><img src="../../images/tobottom.png" alt=""></p>
													</div>
													<div class="team_bottom">
														<div class="team_detail">
															<p>性名：<span>小安</span></p>
															<p>身份证号：<span>130926199501125596</span></p>
															<p>是否乘坐摆渡车：<span>是</span></p>
														</div>
														<div class="team_detail">
															<p>性名：<span>小安</span></p>
															<p>身份证号：<span>130926199501125596</span></p>
															<p>是否乘坐摆渡车：<span>是</span></p>
														</div>
													</div>
												</a>
											</li>
										`
										);
									}
									$('.active_list_ul li:nth-last-child(1)').css({
										'margin-bottom': '0.2rem'
									});
									$(".loadtip p").hide();

									mySwiper.update(); // 重新计算高度;

								}, 800);
							}
						});
					}
					//  刷新
					if(mySwiper.translate >= 50) {
						$.ajax({
							url: "",
							type: "post",
							success: function(data) {

							},
							error: function() {
								$('.init-loading').css('display', 'block');
								setTimeout(function() {
									for(var i = 0; i < 3; i++) {
										$(".team_list .team_list_ul").eq(mySwiper2.activeIndex).append(
											`
											<li>
												<a href="javascript:;">
													<div class="team_top">
														<div class="team_left">
															<img src="../../images/head_list.jpg" alt="">
														</div>
														<div class="team_right">
															<p>中国图书馆</p>
															<p>活动地点：<span>石景山</span></p>
															<p>活动时间：<span>2018-5-12</span></p>
														</div>
													</div>
													<div class="team_middle">
														<p><span>名单查询</span><img src="../../images/tobottom.png" alt=""></p>
													</div>
													<div class="team_bottom">
														<div class="team_detail">
															<p>性名：<span>小安</span></p>
															<p>身份证号：<span>130926199501125596</span></p>
															<p>是否乘坐摆渡车：<span>是</span></p>
														</div>
														<div class="team_detail">
															<p>性名：<span>小安</span></p>
															<p>身份证号：<span>130926199501125596</span></p>
															<p>是否乘坐摆渡车：<span>是</span></p>
														</div>
													</div>
												</a>
											</li>
										`
										);
									}
									$('.init-loading').css('display', 'none');
									mySwiper.update(); // 重新计算高度;
								}, 800);
							}
						});
					}

					//				}else if(mySwiper.translate >= 0 && mySwiper.translate < 50){
					//					$(".init-loading").html('').hide();
					//				}
					return false;
				}
			});
			var mySwiper2 = new Swiper('.swiper-container2', {
				onTransitionEnd: function(swiper) {
					//				$('.w').css('transform', 'translate3d(0px, 0px, 0px)')
					$('.swiper-container2 .swiper-slide-active').css('height', 'auto').siblings('.swiper-slide').css('height', '0px');
					mySwiper.update();
					$('.tab a').eq(mySwiper2.activeIndex).addClass('active').siblings('a').removeClass('active');
				}

			});
//			$('.team_middle').toggle(function() {
//				$(this).children('p').find('span').html('收起');
//				$(this).siblings('.team_bottom').slideDown();
//				$(this).children('p').children('img').attr('src', '../../images/totop.png');
//			}, function() {
//				$(this).children('p').find('span').html('名单查询');
//				$(this).siblings('.team_bottom').slideUp();
//				$(this).children('p').children('img').attr('src', '../../images/tobottom.png');
//			});
			
			$('body').on('click','.team_middle',function(){
				if($('.team_middle').hasClass('slide')){
					$(this).children('p').find('span').html('收起');
					$(this).siblings('.team_bottom').slideDown();	
					$(this).children('p').children('img').attr('src', '../../images/totop.png');
					$(this).removeClass('slide');
				}else{
					$(this).children('p').find('span').html('名单查询');
					$(this).siblings('.team_bottom').slideUp();
					$(this).children('p').children('img').attr('src', '../../images/tobottom.png');
					$(this).addClass('slide');
				}
				
			})
			
		</script>
	</body>

</html>