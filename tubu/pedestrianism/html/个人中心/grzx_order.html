<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>我的徒步</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
		<META HTTP-EQUIV="Cache-Control" CONTENT="no-cache">
		<META HTTP-EQUIV="Expires" CONTENT="0">
		<link rel="stylesheet" type="text/css" href="../../css/reset.css" />
		<link rel="stylesheet" type="text/css" href="../../css/style.css" />
		<link rel="stylesheet" href="../../css/css.css" />
		<link rel="stylesheet" href="../../css/mui.picker.all.css" />
		<script src="../../js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/swiper.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/fontSize.js" type="text/javascript" charset="utf-8"></script>
		<link rel="stylesheet" href="../../single_css/global.css">
		<style>
			body{
				background-color: #ececec;
				overflow: scroll;
				font-family: PingFangSC-Regular;

			}
			.outerScroller{
				width: 7.5rem;
				margin: 0 auto;
			}	
			.scroll{
				position: relative;
				overflow: hidden;
			}
			header,.d-title{
				box-shadow: none;
			}
			.init-loading img{
				width: 1.2rem;
				height: 1.2rem;
				display: block;
				margin: 0.05rem auto;
			}
			.loadtip p{
				font-size: 0.26rem;
				height: 0.4rem;
				line-height: 0.4rem;
				position: fixed;
				bottom: 0;
				width: 7.5rem;
				text-align: center;
				background-color: #EFEFF4;
				z-index: 10;
				font-size: 0.26rem;
			}
			.order_list{
				margin-top: 0.98rem;
				width: 7.5rem;
			}
			.order_list li{
				height: auto;
				background-color: #ffffff;
				margin-bottom: 0.2rem;
			}
			.order_title{
				width: 7.5rem;
				height: 0.8rem;
			}
			.order_title img:nth-child(1){
				display: inline-block;
				width: 0.46rem;
				height: 0.3rem;
				float: left;
				margin-top: 0.25rem;
				margin-left: 0.54rem;
				margin-right: 0.16rem;
			}
			.order_title span:nth-child(2){
				float: left;
				display: inline-block;
				line-height: 0.79rem;
				margin-right: 0.58rem;
				font-size: 0.32rem;
				color: #3c3c40;
			}
			.order_title img:nth-child(3){
				display: inline-block;
				float: left;
				margin-top: 0.29rem;
				height: 0.22rem;
				width: 0.13rem;
			}
			.order_title span:nth-child(4){
				float: right;
				margin-right: 0.54rem;
				line-height: 0.81rem;
				color: #3c3c40;
				font-size: 0.3rem;
			}
			.wait_take{
				color: #fba447 !important;
			}
			.have_take{
				color: #bdbdbd !important;
			}
			.order_info{
				width: 5.8rem;
				margin-left: 1.7rem;
				border-top: solid 1px #bdbdbd;
				padding-top: 0.1rem;
			}
			.order_info p,.order_info p span{
				font-size: 0.28rem;
				height: 0.5rem;
				line-height: 0.5rem;
				color: #6e6e6e;
			}
			.order_info p span:nth-child(1){
				display: inline-block;
				padding-left: 0.04rem;
				padding-right: 0.36rem;
			}
			.order_money{
				width: 7.5rem;
				height: 0.68rem;
			}
			.order_money p{
				position: relative;
				float: right;
				padding-right: 0.54rem;
				height: 0.68rem;
				line-height: 0.68rem;
				color: #5d5d5d;
				font-size: 0.32rem;
			}
			.order_money p span:nth-child(1){
				float: left;
				padding-right: 0.14rem;
				height: 0.68rem;
				font-size: 0.26rem;
				line-height: 0.68rem;
			}
			.order_money p span:nth-child(2){
				float: left;
				height: 0.68rem;
				font-size: 0.32rem;
				line-height: 0.68rem;
			}
		</style>
	</head>
	<body>
		
		<div class="outerScroller">
			<div class="scroll">
				<header>
					<div class="d-title">
						<a href="#">
							<img src="../../images/cd.png" alt="" />
						</a>
						<span>我的订单</span>
					</div>
				</header>
				<div class="swiper-container">
					<div class="swiper-wrapper w">
						<div class="swiper-slide d">
							<div class="init-loading list-group-item text-center" style="display: none;"><img src="../../images/loading.gif"/></div>
							<div class="swiper-container2">
								<div class="swiper-slide list-group">
									<ul class="order_list">
										<li>
											<a href="javascript:;">
												<div class="order_title">
													<img src="../../images/order_team.png" alt="">
													<span>中间美术馆</span>
													<img src="../../images/order_right.png" alt="">
													<span class="wait_take">待领取</span>
												</div>
												<div class="order_info">
													<p><span>领队名称：</span><span>小安</span></p>
													<p><span>手机号码：</span><span>13718391141</span></p>
													<p><span>活动时间：</span><span>2017-10-15</span></p>
												</div>
												<div class="order_money">
													<p><span>付款</span><span>$512</span></p>
												</div>
											</a>
										</li>
										<li>
											<a href="javascript:;">
												<div class="order_title">
													<img src="../../images/order_person.png" alt="">
													<span>中间美术馆</span>
													<img src="../../images/order_right.png" alt="">
													<span class="have_take">已领取</span>
												</div>
												<div class="order_info">
													<p><span>领队名称：</span><span>小安</span></p>
													<p><span>手机号码：</span><span>13718391141</span></p>
													<p><span>活动时间：</span><span>2017-10-15</span></p>
												</div>
												<div class="order_money">
													<p><span>付款</span><span>$512</span></p>
												</div>
											</a>
										</li>
									</ul>
								</div>
							</div>
						</div>
					</div>
					<div class="loadtip"><p></p></div>
					<div class="swiper-scrollbar"></div>
				</div>
			</div>
		</div>
		<script>
//			$('.swiper-container, .w').height($(window).height()-$('header').height());
			$('.swiper-container, .w').height($(window).height()-$('header').height()+'px');
			var loadFlag = true;
			var oi = 0;
			var mySwiper = new Swiper('.swiper-container',{
				direction: 'vertical',
				scrollbar: '.swiper-scrollbar',
				slidesPerView: 'auto',
				mousewheelControl: true,
				freeMode: true,
				onTouchMove: function(swiper){		//手动滑动中触发
					var _viewHeight = document.getElementsByClassName('swiper-wrapper')[0].offsetHeight;
					var _contentHeight = document.getElementsByClassName('swiper-slide')[0].offsetHeight;
				},
				onTouchEnd: function(swiper) {
					var _viewHeight = document.getElementsByClassName('swiper-wrapper')[0].offsetHeight;
					var _contentHeight = document.getElementsByClassName('swiper-slide')[0].offsetHeight;
					
					 // 上拉加载
					if(mySwiper.translate <= _viewHeight - _contentHeight - 50 && mySwiper.translate < 0) {
						$.ajax({
							url:"",
							type:"post",
							success:function(data){
								
							},
							error:function(){
								$(".loadtip p").show();
								if(loadFlag){
									$(".loadtip p").html('正在加载...');
								}else{
									$(".loadtip p").html('没有更多啦！');
								}
								setTimeout(function() {
									for(var i =0;i<3;i++) {
										$(".list-group ul").eq(mySwiper2.activeIndex).append(`
											<li>
												<a href="javascript:;">
													<div class="order_title">
														<img src="../../images/order_team.png" alt="">
														<span>中间美术馆</span>
														<img src="../../images/order_right.png" alt="">
														<span class="wait_take">待领取</span>
													</div>
													<div class="order_info">
														<p><span>领队名称：</span><span>小安</span></p>
														<p><span>手机号码：</span><span>13718391141</span></p>
														<p><span>活动时间：</span><span>2017-10-15</span></p>
													</div>
													<div class="order_money">
														<p><span>付款</span><span>$512</span></p>
													</div>
												</a>
											</li>
										`);
									}
									$(".loadtip p").hide();
//									 $('.order_list li:nth-last-child(1)').css({'margin-bottom':'0.2rem'});
									mySwiper.update(); // 重新计算高度;
									
								}, 800);
							}
						});
					}
					//  刷新
					if(mySwiper.translate >= 50) {
						$.ajax({
							url:"",
							type:"post",
							success:function(data){
								
							},
							error:function(){
								$('.init-loading').css('display','block');
								setTimeout(function() {
									for(var i =0;i<3;i++) {
										$(".list-group ul").eq(mySwiper2.activeIndex).append(`
											<li>
												<a href="javascript:;">
													<div class="order_title">
														<img src="../../images/order_team.png" alt="">
														<span>中间美术馆</span>
														<img src="../../images/order_right.png" alt="">
														<span class="wait_take">待领取</span>
													</div>
													<div class="order_info">
														<p><span>领队名称：</span><span>小安</span></p>
														<p><span>手机号码：</span><span>13718391141</span></p>
														<p><span>活动时间：</span><span>2017-10-15</span></p>
													</div>
													<div class="order_money">
														<p><span>付款</span><span>$512</span></p>
													</div>
												</a>
											</li>
										`);
									}
									$('.init-loading').css('display','none');
									mySwiper.update(); // 重新计算高度;
								}, 800);
							}
						});
					}
						
			//				}else if(mySwiper.translate >= 0 && mySwiper.translate < 50){
			//					$(".init-loading").html('').hide();
			//				}
					return false;
				}
			});
			var mySwiper2 = new Swiper('.swiper-container2',{
				onTransitionEnd: function(swiper){
			//				$('.w').css('transform', 'translate3d(0px, 0px, 0px)')
					$('.swiper-container2 .swiper-slide-active').css('height','auto').siblings('.swiper-slide').css('height','0px');
					mySwiper.update();
					$('.tab a').eq(mySwiper2.activeIndex).addClass('active').siblings('a').removeClass('active');
				}
				
			});
		</script>
	</body>
</html>
