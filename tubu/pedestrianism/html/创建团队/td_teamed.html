<!DOCTYPE html> 
<html> 
	<head>
		<meta charset="UTF-8">
		<title>我的徒步</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link rel="stylesheet" type="text/css" href="../../css/reset.css" />
		<link rel="stylesheet" type="text/css" href="../../css/style.css" />
		<link rel="stylesheet" href="../../css/css.css" />
		<script src="../../js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/swiper.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/jquery.event.drag-1.5.min.js"></script>
		<script src="../../js/jquery.touchSlider.js"></script>
		<script src="../../js/fontSize.js" type="text/javascript" charset="utf-8"></script>
		<style type="text/css">
			body,html{
				background-color: #EFEFF4;
				height: 100%;
				overflow-x: hidden;
			}
			.swiper-container{
				overflow: hidden;
			}
			header{
				width: 7.5rem;
				margin-left: -3.75rem;
				left: 50%;
				position: absolute;
			}
			.swiper-container, .w{height: calc(100vh - 60px);}
			
			.init-loading img{
				width: 1.2rem;
				height: 1.2rem;
				display: block;
				margin: 0.05rem auto;
			}
			.loadtip p{
				font-size: 0.26rem;
				text-align: center;
				padding-top: 0.1rem;
				padding-bottom: 0.1rem;
				position: fixed;
				bottom: 0;
				width: 6.87rem;
				text-align: center;
				background-color: #EFEFF4;
				z-index: 10;
				font-size: 0.26rem;
				text-align: center;
			}
			.outerScroller{
				width: 7.5rem;
				margin: 0 auto;
			}	
			.scroll{
				position: relative;
				overflow: hidden;
			}
			.z-alert{
				position: absolute;
			}
			.z-as-fixed{
				width: 7.5rem;
				left: 50%;
				margin-left: -3.75rem;
			}
			.z-moon{
				height: 1.29rem;
				background: linear-gradient(to right, #ff9800 , #ff7043);
			}
		</style>
	</head>
	<body>
		<div class="outerScroller">
			<div class="scroll">
				<header>
					<div class="d-title">
						<a href="#">
							<img src="../../images/cd.png" alt="" />
						</a>
						<span>最美徒步</span>
					</div>
				</header>
				<section class="zsec-bg zsec-bottom">
					<div class="z-moon">
						<h4>健康不求人</h4>
						<h5>
							<img src="../../images/z-moon.png" alt="">
						</h5>
					</div>
					<div class="pa-top z-boxbg">
						
					
					</div>
				</section>
				<div class="z-alert">
					<ul>
						<li>
							<a href="#" class="active"><img src="../../images/list-e-1.png" alt="" class="nm"/><img src="../../images/list-e-2.png" class="zx"/>徒步活动</a>
						</li>
						<li>    
							<a href="#"><img src="../../images/list-d-1.png" alt=""  class="nm"  style="margin-top: .21rem;"/><img src="../../images/list-d-2.png" class="zx" style="margin-top: .21rem;"/>最美徒步</a>
						</li>
						<li>
							<a href="#"><img src="../../images/list-f-1.png" alt=""  class="nm"/><img src="../../images/list-f-2.png" class="zx"/>健康指导</a>
						</li>
					</ul>
				</div>
				<div class="z-as z-as-fixed"> 
					<a href="#">相册</a>
					<a href="#">拍摄</a> 
				</div>
			</div>
		</div>
		<div class="box-transparent"></div>	
		<script type="text/javascript">
			var loadFlag = true;
			var oi = 0;
			var mySwiper = new Swiper('.swiper-container',{
				direction: 'vertical',
				scrollbar: '.swiper-scrollbar',
				slidesPerView: 'auto',
				mousewheelControl: true,
				freeMode: true,
				onTouchMove: function(swiper){		//手动滑动中触发
					var _viewHeight = document.getElementsByClassName('swiper-wrapper')[0].offsetHeight;
					var _contentHeight = document.getElementsByClassName('swiper-slide')[0].offsetHeight;
				},
				onTouchEnd: function(swiper) {
					var _viewHeight = document.getElementsByClassName('swiper-wrapper')[0].offsetHeight;
					var _contentHeight = document.getElementsByClassName('swiper-slide')[0].offsetHeight;
					
					 // 上拉加载
					if(mySwiper.translate <= _viewHeight - _contentHeight - 50 && mySwiper.translate < 0) {
						$.ajax({
							url:"",
							type:"post",
							success:function(data){
								
							},
							error:function(){
								$('.z-as-fixed').css('display','none');
								if(loadFlag){
									$(".loadtip p").html('正在加载...');
								}else{
									$(".loadtip p").html('没有更多啦！');
								}
								setTimeout(function() {
									for(var i =0;i<6;i++) {
										$(".list-group ul").eq(mySwiper2.activeIndex).append(`
											<li>
												<a href="#">
													<div class="z-boxl">
														<div class="z-boxl1">
															<h4>
																<p>北京市</p>
																<p>奥林匹克森林公园</p>
															</h4>
															<h5>2017.04.19</h5>
														</div>
														<div class="z-boxl2">
															<h2>1686</h2>
															<p>点赞</p>
														</div>
														<div class="z-boxl2">
															<h2>354</h2>
															<p>评论</p>
														</div>
													</div>
													<div class="z-boxr">
														<img class="z-boxr-bg" src="images/z-hu_03.jpg" alt="">
														<div class="z-boxr-bottom">
															<img src="images/z-moon.png" alt="">
															<span>拔剑乌托邦</span>
															<p class="z-boxr-border">9</p>
														</div>
													</div>
												</a>
											</li>
										`);
									}
									 $(".loadtip p").html('');
									 $('.z-as-fixed').css('display','block');
									mySwiper.update(); // 重新计算高度;
								}, 800);
							}
						});
					}
					//  刷新
					if(mySwiper.translate >= 50) {
						$.ajax({
							url:"",
							type:"post",
							success:function(data){
								
							},
							error:function(){
								$('.init-loading').css('display','block');
								setTimeout(function() {
									for(var i =0;i<20;i++) {
										$(".list-group ul").eq(mySwiper2.activeIndex).append(`
											<li>
												<a href="#">
													<div class="z-boxl">
														<div class="z-boxl1">
															<h4>
																<p>北京市</p>
																<p>奥林匹克森林公园</p>
															</h4>
															<h5>2017.04.19</h5>
														</div>
														<div class="z-boxl2">
															<h2>1686</h2>
															<p>点赞</p>
														</div>
														<div class="z-boxl2">
															<h2>354</h2>
															<p>评论</p>
														</div>
													</div>
													<div class="z-boxr">
														<img class="z-boxr-bg" src="images/z-hu_03.jpg" alt="">
														<div class="z-boxr-bottom">
															<img src="images/z-moon.png" alt="">
															<span>拔剑乌托邦</span>
															<p class="z-boxr-border">9</p>
														</div>
													</div>
												</a>
											</li>
										`);
									}
									$('.init-loading').css('display','none');
									mySwiper.update(); // 重新计算高度;
								}, 800);
							}
						});
					}
						
	//				}else if(mySwiper.translate >= 0 && mySwiper.translate < 50){
	//					$(".init-loading").html('').hide();
	//				}
					return false;
				}
			});
			var mySwiper2 = new Swiper('.swiper-container2',{
				onTransitionEnd: function(swiper){
	//				$('.w').css('transform', 'translate3d(0px, 0px, 0px)')
					$('.swiper-container2 .swiper-slide-active').css('height','auto').siblings('.swiper-slide').css('height','0px');
					mySwiper.update();
					$('.tab a').eq(mySwiper2.activeIndex).addClass('active').siblings('a').removeClass('active');
				}
				
			});
		</script>
	</body>
</html>
