(function(a){Array.prototype.forEach=HTMLCollection.prototype.forEach=function(d){for(var c=0;c<this.length;c++){d.call(this[c],this[c],c)}};Number.prototype.forEach=function(d){for(var c=1;c<=this;c++){d.call(c)}};Object.prototype.on=function(c){if(c in this){return true}else{return false}};var b={init:function(){var d=this.getPath();var c=this.createDom("link",{attrs:{href:d+"css/enjoy.css",onload:function(){console.info("Enjoy温馨提示 : enjoy.css 加载成功,祝您使用愉快！")},onerror:function(){console.error("Enjoy错误提示 : enjoy.css 加载失败！\n\n 请您仔细检查路径是否正确")}},append:{tagName:"head"}});this.sweep()},enjoy:function(c,i){var g=i[1];var f=this.getParentOffset(c);if(document.getElementById("eui-enjoy")){return false}var e=this.createDom("div",{attrs:{id:"eui-enjoy"},styles:{left:f.left+"px",top:(f.top+c.offsetHeight+10)+"px"},append:{tagName:"body"}});document.addEventListener("click",function(){var j=document.getElementById("eui-enjoy");if(j){document.body.removeChild(j);event.stopPropagation()}},false);var d=140;var h=this.getPath();d.forEach(function(l,k){var m=this;var n=this;var j=this<=132?"<span><img src='"+h+"enjoy/"+m+".gif' oid = '|[enjoy-"+this+"]'/></span>":"";b.createDom("li",{attrs:{html:j,onclick:function(){if(i[2]=="text"){var p=this.getElementsByTagName("img")[0].getAttribute("oid");b.createDom("span",{attrs:{src:o,html:p},styles:{display:"inline"},append:{tagName:g}})}else{var o=this.getElementsByTagName("img")[0].getAttribute("src");b.createDom("img",{attrs:{src:o,},append:{tagName:g}})}event.stopPropagation()}},append:{tagName:e},canBack:function(){if(n==1){this.style.borderRadius="5px 0 0 0"}if(n==20){this.style.borderRadius="0 5px 0 0"}if(n==121){this.style.borderRadius="0 0 0 5px"}if(n==140){this.style.borderRadius="0 0 5px 0"}if(n%20!=0){this.style.borderRight="0"}if(n<=120){this.style.borderBottom="0"}}})})},sweep:function(){var c=document.getElementsByTagName("*");var d=[];c.forEach(function(){if(this.getAttribute("enjoy")){var e=this.getAttribute("enjoy").split("|");this.addEventListener(e[0],function(){if(document.getElementById("eui-enjoy")){var f=document.getElementById("eui-enjoy");document.body.removeChild(f)}(function(g){b.enjoy(this,g)}.call(this,e))});this.addEventListener("click",function(){event.stopPropagation()},false)}})},createDom:function(e,g){g=g?g:{};var c=null;var f=null;if(e&&typeof e=="string"){c=document.createElement(e);if(typeof g.append=="object"){f=this.append(g.append,c).parent}if(e=="link"){c.rel="stylesheet"}if(typeof g.attrs=="object"){c=this.setAttr(c,g.attrs)}if(typeof g.styles=="object"){for(var d in g.styles){c.style[d]=g.styles[d]}}if(typeof g.canBack=="function"){g.canBack.call(c)}}return c},setAttr:function(c,d){if(typeof c!="object"||!c.tagName||typeof d!="object"){return false}for(var e in d){if(e!="html"){if(typeof d[e]=="function"){c[e]=d[e]}else{c.setAttribute(e,d[e])}}else{c.innerHTML=d[e]}}return c},append:function(g,j){g=g?g:"";if(!g){return false}if(typeof g=="object"){if(typeof g.tagName=="string"){var f=g.tagName?g.tagName:"";var h=g.index?g.index:0;if(!f){return false}var e=/\#|\.|[a-z]/;if(!e.test(f[0])){return false}var c=f.substr(1);var i=null;switch(f.substr(0,1)){case"#":i=document.getElementById(c);break;case".":var k=document.getElementsByTagName("*");var d=[];k.forEach(function(l){if(this.getAttribute("class").indexOf(c)>-1){d.push(this)}});i=d[h];break;default:var k=document.getElementsByTagName(f);i=k[h]}i.appendChild(j)}if(typeof g.tagName=="object"&&g.tagName.tagName!=""){i=g.tagName;i.appendChild(j)}}return{tag:j,parent:i}},getParentLeft:function(c){var d=c.offsetLeft;while(c=c.offsetParent){d+=c.offsetLeft}return d},getParentTop:function(c){var d=c.offsetTop;while(c=c.offsetParent){d+=c.offsetTop}return d},getParentOffset:function(c){var e=this.getParentLeft(c),d=this.getParentTop(c);return{top:d,left:e}},getPath:function(c){var e=document.scripts,d;c=c?c:"enjoy.js";e.forEach(function(){if(this.src.indexOf(c)>-1){d=this.src.substring(0,this.src.lastIndexOf("/")+1)}});return d}};window.onload=function(){b.init()}})(window);