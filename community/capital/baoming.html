<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>报名</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/mui.min.css" />
    <link rel="stylesheet" type="text/css" href="../css/mui.picker.min.css" />
    <script src="../js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/common.js" type="text/javascript" charset="utf-8"></script>

    <style>
        body{
            background-color: #fbf4e2;
        }
        .index{
            background-color: #fbf4e2;
            width: 7.5rem;
            height: 100%;
            font-family: PingFangSC-Medium;
            padding-top: .25rem;
        }
        .index .form_title{
            width: 5.97rem;
            height: 2.29rem;
            display: block;
            margin: 0 auto .3rem;
        }
        .info_ul{
            width: 7.5rem;
            height: auto;
        }
        .info_ul li{
            width: 5.76rem;
            margin: 0 auto;
            position: relative;
        }
        .info_ul li span{
            height: .48rem;
            line-height: .48rem;
            color: #8a010e;
            font-size: .36rem;
            display: block;
        }
        .info_ul li input,.btn{
        	padding: 0;
            width: 5.76rem;
            height: .72rem;
            color: #000;
            font-size: .36rem;
            display: block;
            outline: none;
            background-color: #fbf4e2;
            border: solid 1px #8a010e;
            text-indent: .2rem;
            margin-bottom: 0;
            text-align: left;
        }
        .info_ul li .miaoshu{
            padding: .2rem;
            width: 5.76rem;
            min-height: 1.46rem;
            height: auto;
            line-height: 0.48rem;
            color: #000;
            font-size: .36rem;
            display: block;
            outline: none;
            border: solid 1px #8a010e;
            background-color: #fbf4e2;
            margin-bottom: 0;
			-webkit-user-select:text;
        }
        textarea:-ms-input-placeholder{
			color: #999;
		}
		textarea::-webkit-input-placeholder{
			color: #999;
		}/* WebKit browsers */

        .active_choose{
            height: .72rem;
            border: solid 1px #8a010e;
            overflow: hidden;
        }
        .active_choose select{
            width: 5.76rem !important;
            border: none !important;
            float: left;
            background-color: #fbf4e2;
            padding: 0;
            line-height: .72rem;
            height: .72rem;
            text-indent: 0.2rem;
             border-bottom: solid 1px #8a010e;
            border-left: solid 1px #8a010e;
            border-right: solid 1px #8a010e;
            background-image: url(../images/capital/baoming_xiala.png);
            background-repeat: no-repeat;
            background-position: 5.35rem center;
            background-size: 0.29rem 0.2rem;
            font-size: 0.36rem;
		    line-height: 0.72rem;
		    margin: 0;
        }
        .border_line{
            width: 0.01rem;
            height: 0.7rem;
            position: absolute;
            right: 0.5rem;
            background-color: #8a010e;
            z-index: 100;
        }

		/*本次修改*/
        .tijiao{
        	clear: both;
            display: block;
            margin: .3rem auto;
            width: 2.62rem;
            height: .72rem;
            line-height: .72rem;
            text-align: center;
            background-color: #8a010e;
            border-radius: .1rem;
            color: #fff;
            font-size: .36rem;
            padding: 0;
        }
        .shuru_tishi{
        	font-size: 0.24rem;
        	float: right;
        	
        }
        .shuru_tishi span{
        	font-size: 0.24rem !important;
        	display: inline-block !important;
        }
        
        /*本次修改*/
        
        /* mui */
       	.mui-picker{
       		background-color: #fff;
       	}
        .mui-btn-blue{
            background-color: #8a010e;
            border-color: #8a010e;
        }
        .mui-pciker-list li.highlight{
        	color: #000;
        }
        .mui-pciker-list li{
        	color: #000;
        	font-family: PingFangSC-Medium;
        }
        .mui-dtpicker-title h5{
        	color: #000;
        }
        	
    </style>
</head>
<body>
    <form class="index">
        <img src="../images/capital/info_biao.png" alt="" class="form_title">
        <ul class="info_ul">
            <li>
                <span>姓名</span>
                <input type="text" name="" value="" id="user">
            </li>
            <li>
                <span>电话</span>
                <input type="text" name="" value="" id="tel">
            </li>
            <li>
                <span>采访时间</span>
                <!-- <button type="text" id='result' readonly data-options='{"value":"2015-10-10 10:10","beginYear":2010,"endYear":2020}' class="btn"></button> -->
                <button type="text" id='result' readonly class="btn"></button>
            </li>
            <li>
                <span>活动选择</span>
                <div class="active_choose">
                    <select id="select_icon">
                        <option value="1">走访老字号</option>
                        <option value="2">寻找胡同里的故事</option>
                        <option value="3">寻找非遗传承人</option>
                        <option value="4">走进三山五园</option>
                    </select> 
                    <div class="border_line"></div>
                </div>
            </li>
            <li>
                <span>一句话描述</span>
                <div name="" rows="" cols="" placeholder="一句话描述" tabindex='-1'  class="miaoshu" contenteditable></div>
                <p class="shuru_tishi"><span>100</span>/100</p>
            </li>
        </ul>
        <button type="button" name="button" class="tijiao">提交</button>
    </form>
    <script type="text/javascript">
    	var max=100;
    	var timer=null;
    	$(".miaoshu").focus(function(){
			timer=setInterval(function(){
				var len=$(".miaoshu").html().length;
				var result=$(".miaoshu").html();
				var num=max-len;
				if (num<0) {
					result=result.substring(0,100);
					$(".miaoshu").html(result);
					$('.miaoshu').blur();
					alert("只能输入100个字!");
					return false;
				}
				$(".shuru_tishi span").html(num);
			},10);

		});
		
    	
    	
        $('.tijiao').click(function(){
        	var reg=/^(((\s?[\u4e00-\u9fa5]+\s?)+)|([a-zA-Z]+\s?)+)$/
			var user=$('#user');
			if(user.val()==""){
				alert('请输入您的姓名');
				return;
			}

        	var tel=$('#tel');
			var reg=/^1[3|4|5|7|8]\d{9}$/;
        	if(!reg.test(tel.val())){
				alert('请输入您的电话');
				return;
			}

        	if($('#result').html()==""){
        		alert('请选择您的采访时间');
				return;
        	}
        	if($('#choose').val()==""){
        		alert('请选择您的活动类型');
				return;
        	}
        	if($('.miaoshu').html()==""){
        		alert('请输入您的描述信息');
				return;
        	}
        })

        var year=new Date().getFullYear(); 
        var month=new Date().getMonth()+1; 
        var day=new Date().getDate();
        var hour=new Date().getHours();
        var minute=new Date().getMinutes();
        if(minute<10){
            minute='0'+minute;
        }
        $('#result').html(year+"-"+month+'-'+day+' '+hour+':'+minute);  
    </script>
    <script src="../js/mui.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/mui.picker.min.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript">
    	(function($) {
			$.init();
            var year=new Date().getFullYear(); 
            var month=new Date().getMonth()+1; 
            var day=new Date().getDate();
            var hour=new Date().getHours();
            var minute=new Date().getMinutes();
			var result = $('#result')[0];
			var btns = $('.btn');
            

			btns.each(function(i, btn) {
				btn.addEventListener('tap', function() {
					var optionsJson = this.getAttribute('data-options') || '{}';
					var options = JSON.parse(optionsJson);
					var id = this.getAttribute('id');
					/*
					 * 首次显示时实例化组件
					 * 示例为了简洁，将 options 放在了按钮的 dom 上
					 * 也可以直接通过代码声明 optinos 用于实例化 DtPicker
					 */
					var picker = new $.DtPicker(options);
					picker.show(function(rs) {
						/*
						 * rs.value 拼合后的 value
						 * rs.text 拼合后的 text
						 * rs.y 年，可以通过 rs.y.vaue 和 rs.y.text 获取值和文本
						 * rs.m 月，用法同年
						 * rs.d 日，用法同年
						 * rs.h 时，用法同年
						 * rs.i 分（minutes 的第二个字母），用法同年
						 */
						result.innerText = '' + rs.text;
						/*
						 * 返回 false 可以阻止选择框的关闭
						 * return false;
						 */
						/*
						 * 释放组件资源，释放后将将不能再操作组件
						 * 通常情况下，不需要示放组件，new DtPicker(options) 后，可以一直使用。
						 * 当前示例，因为内容较多，如不进行资原释放，在某些设备上会较慢。
						 * 所以每次用完便立即调用 dispose 进行释放，下次用时再创建新实例。
						 */
						picker.dispose();
					});
				}, false);
			});
		})(mui);
    </script>
</body>
</html>
